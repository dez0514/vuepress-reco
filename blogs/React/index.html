<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.60">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/basketball.png"><meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,maximum-scale=1.0,user-scalable=no;"><title>前端笔记</title><meta name="description" content="Just go ahead">
    <link rel="modulepreload" href="/vuepress-reco/assets/app-10c31ebe.js"><link rel="modulepreload" href="/vuepress-reco/assets/framework-4a7f5a2b.js"><link rel="modulepreload" href="/vuepress-reco/assets/index.html-61e87c1a.js"><link rel="modulepreload" href="/vuepress-reco/assets/index.html-00fe8297.js"><link rel="prefetch" href="/vuepress-reco/assets/index.html-6d5e9dd3.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-86475d76.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-d4810458.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-046de93b.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-d9df796f.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/message.html-27c550b9.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/ES6.html-3bc170be.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/EventLoop.html-4c7fd754.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/Promise.html-6fc2b72b.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-49f640e6.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/this.html-9cc4372e.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-f577192d.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-41493d53.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-787c2911.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-b3117fc0.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-ca7f67b3.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-26529f03.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-82847564.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-d7b3e7cb.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-697ca8fb.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-ea462999.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-cef34196.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-941033f9.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-0332c329.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-459c60a2.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-3380a396.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-d273bf71.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-fa40caa2.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-289a8d97.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/message.html-f7146355.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/ES6.html-c0a3a43f.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/EventLoop.html-02b2863f.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/Promise.html-46a053a9.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-41bdb6b2.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/this.html-4da3e57f.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-9b7bc4a3.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-9f051959.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-b1f57be5.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-ee919d28.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-c5eaf982.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-8849811c.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-2a2ef2d8.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-ad779ddd.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-a71e316d.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-dab0e570.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/index.html-3945b81d.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/404.html-50a0bb59.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/reco-valine-a0c1af1f.js" as="script"><link rel="prefetch" href="/vuepress-reco/assets/CustomModule-2326b1ae.js" as="script">
    <link rel="preload" href="/vuepress-reco/assets/style-19cee354.css" as="style"><link rel="stylesheet" href="/vuepress-reco/assets/style-19cee354.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper series--no"><div><header class="navbar-container"><!--[--><div class="site-brand nav-item"><img class="logo" src="/vuepress-reco/head.png" alt="前端笔记"><a href="/vuepress-reco/" class="site-name can-hide">前端笔记</a></div><div class="nav-item navbar-links-wrapper" style=""><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/vuepress-reco/blogs/javascript/" class="link" aria-label="javascript"><!--[--><!--]--><!--v-if--><span>javascript</span><!--[--><!--]--></a></div><div class="navbar-links__item"><a aria-current="page" href="/vuepress-reco/blogs/React/" class="router-link-active router-link-exact-active link router-link-active" aria-label="React"><!--[--><!--]--><!--v-if--><span>React</span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Vue"><span class="title"><!----><span>Vue</span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Vue"><span class="title"><!----><span>Vue</span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/Vue/vue2/" class="link" aria-label="vue2"><!--[--><!--]--><!--v-if--><span>vue2</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/Vue/vue3/" class="link" aria-label="vue3学习"><!--[--><!--]--><!--v-if--><span>vue3学习</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/vuepress-reco/blogs/network/" class="link" aria-label="网络"><!--[--><!--]--><!--v-if--><span>网络</span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/npmlink/" class="link" aria-label="npm-link"><!--[--><!--]--><!--v-if--><span>npm-link</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/cli/" class="link" aria-label="cli"><!--[--><!--]--><!--v-if--><span>cli</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/githubIo/" class="link" aria-label="静态部署github.io"><!--[--><!--]--><!--v-if--><span>静态部署github.io</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><!--v-if--><span>webpack</span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><a class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></a><a class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></a></div><!--]--></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/vuepress-reco/blogs/javascript/" class="link" aria-label="javascript"><!--[--><!--]--><!--v-if--><span>javascript</span><!--[--><!--]--></a></div><div class="navbar-links__item"><a aria-current="page" href="/vuepress-reco/blogs/React/" class="router-link-active router-link-exact-active link router-link-active" aria-label="React"><!--[--><!--]--><!--v-if--><span>React</span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Vue"><span class="title"><!----><span>Vue</span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Vue"><span class="title"><!----><span>Vue</span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/Vue/vue2/" class="link" aria-label="vue2"><!--[--><!--]--><!--v-if--><span>vue2</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/Vue/vue3/" class="link" aria-label="vue3学习"><!--[--><!--]--><!--v-if--><span>vue3学习</span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/vuepress-reco/blogs/network/" class="link" aria-label="网络"><!--[--><!--]--><!--v-if--><span>网络</span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="工程化"><span class="title"><!----><span>工程化</span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/npmlink/" class="link" aria-label="npm-link"><!--[--><!--]--><!--v-if--><span>npm-link</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/cli/" class="link" aria-label="cli"><!--[--><!--]--><!--v-if--><span>cli</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/githubIo/" class="link" aria-label="静态部署github.io"><!--[--><!--]--><!--v-if--><span>静态部署github.io</span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/vuepress-reco/blogs/engineering/webpack/" class="link" aria-label="webpack"><!--[--><!--]--><!--v-if--><span>webpack</span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><a class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></a></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/vuepress-reco/head.png" alt="前端笔记"><a href="/vuepress-reco/" class="site-name can-hide">前端笔记</a></div><!--[--><!--]--></aside><!--[--><main class="page-container show-catalog"><!----><div class="page-info"><a class="xicon-container left" href="javascript:void(0)" target="_self"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->寒山少年<!--]--></span></a><!----><!----><!----><a class="xicon-container left" href="javascript:void(0)" target="_self"><!--[--><svg class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 12 12"><g fill="none"><path d="M1.974 6.659a.5.5 0 0 1-.948-.317c-.01.03 0-.001 0-.001a1.633 1.633 0 0 1 .062-.162c.04-.095.099-.226.18-.381c.165-.31.422-.723.801-1.136C2.834 3.827 4.087 3 6 3c1.913 0 3.166.827 3.931 1.662a5.479 5.479 0 0 1 .98 1.517l.046.113c.003.008.013.06.023.11L11 6.5s.084.333-.342.474a.5.5 0 0 1-.632-.314v-.003l-.006-.016a3.678 3.678 0 0 0-.172-.376a4.477 4.477 0 0 0-.654-.927C8.584 4.673 7.587 4 6 4s-2.584.673-3.194 1.338a4.477 4.477 0 0 0-.795 1.225a2.209 2.209 0 0 0-.03.078l-.007.018zM6 5a2 2 0 1 0 0 4a2 2 0 0 0 0-4zM5 7a1 1 0 1 1 2 0a1 1 0 0 1-2 0z" fill="currentColor"></path></g></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[--><span id="/vuepress-reco/blogs/React/" class="leancloud-visitors" data-flag-title="Your Article Title"><a class="leancloud-visitors-count" style=""></a></span><!--]--></span></a></div><div class="theme-reco-default-content"><div><h2 id="react" tabindex="-1"><a class="header-anchor" href="#react" aria-hidden="true">#</a> React</h2><p>单向响应的数据流 − React 实现了单向响应的数据流，从而减少了重复代码，这也是它为什么比传统数据绑定更简单</p><h3 id="jsx" tabindex="-1"><a class="header-anchor" href="#jsx" aria-hidden="true">#</a> jsx</h3><p>React 使用 JSX 来替代常规的 JavaScript，JSX 是一个看起来很像 XML 的 JavaScript 语法扩展，其实就是将js和html结合起来书写。</p><h3 id="class组件生命周期" tabindex="-1"><a class="header-anchor" href="#class组件生命周期" aria-hidden="true">#</a> class组件生命周期</h3><ol><li>初始化阶段 initialization, 比如constructor</li><li>组件挂载阶段 mount</li></ol><ul><li>componentWillMount 组件挂载到DOM前调用,只会被调用一次, 这里写setState不会引起组件重新渲染</li><li>render 返回一个react元素, react根据此函数的返回值渲染DOM. 不能在这里setState</li><li>componentDidMount 组件挂载到DOM后调用, 且只会被调用一次</li></ul><ol start="3"><li>更新阶段 update</li></ol><ul><li>componentWillReceiveProps(nextProps) 触发于props引起的组件更新过程中</li><li>shouldComponentUpdate(nextProps, nextState) 比较之前和当前的props state是否有变化</li><li>componentWillUpdate(nextProps, nextState) render方法前执行</li><li>render</li><li>componentDidUpdate(preProps, preState) 4.卸载阶段 unmount</li><li>componentWillUnmount 卸载前调用, 在这里可以清理一些定时器</li></ul><h3 id="事件机制" tabindex="-1"><a class="header-anchor" href="#事件机制" aria-hidden="true">#</a> 事件机制：</h3><p>答 ：React并不是将click事件绑在该div的真实DOM上，而是在document处监听所有支持的事件，当事件发生并冒泡至document处时，React将事件内容封装并交由真正的处理函数运行。这样的方式不仅减少了内存消耗，还能在组件挂载销毁时统一订阅和移除事件。 另外冒泡到 document 上的事件也不是原生浏览器事件，而是 React 自己实现的合成事件（SyntheticEvent）。因此我们如果不想要事件冒泡的话，调用 event.stopPropagation 是无效的，而应该调用 event.preventDefault。</p><h3 id="hooks" tabindex="-1"><a class="header-anchor" href="#hooks" aria-hidden="true">#</a> Hooks</h3><p>规则限制: 只在React最顶层使用，不能在循环，条件，或者嵌套函数中使用。指的是 useXXX 不能在if中使用，不是指定义的 setXXX 方法不能在if中使用。 基础： useState, useEffect, useContext 额外的：useReducer, useCallback, useMemo, useRef, useImperativeHandle, useLayoutEffect, useDebugValue</p><ol><li>常用的用法：useReducer + useContext， 利用二者结合来实现<code>局部</code>中的全局数据管理。效果类似 redux。</li><li>useMemo： 类似vue的计算属性computed，返回一个 memoized 值。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// a, b 为依赖项，当依赖项变化时才会变化，否则使用缓存的</span>
<span class="token keyword">const</span> memoizedValue <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">computeExpensiveValue</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>useCallback：缓存函数。返回一个 memoized 回调函数。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// a, b 为依赖项，当依赖项变化时才会变化，否则使用缓存的</span>
<span class="token keyword">const</span> memoizedCallback <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>useImperativeHandle：类似于vue3的defineExpose， 暴露出子组件，在父组件调用ref, 来调用子组件的方法。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 用法： useImperativeHandle(ref, createHandle, [deps])</span>
<span class="token comment">// useImperativeHandle 可以在使用 ref 时自定义暴露给父组件的实例值。</span>
<span class="token comment">// 在大多数情况下，应当避免使用 ref 这样的命令式代码。</span>
<span class="token comment">// useImperativeHandle 应当与 forwardRef 一起使用：</span>
<span class="token keyword">function</span> <span class="token function">FancyInput</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span> <span class="token operator">...</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
FancyInput <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span>FancyInput<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在 渲染 &lt;FancyInput ref={inputRef} /&gt; 的父组件可以调用 inputRef.current.focus()。</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>useLayoutEffect：尽可能使用标准的 useEffect 以避免阻塞视觉更新。</li></ol><p>说明：其函数签名与 useEffect 相同，但它会在所有的 DOM 变更之后同步调用 effect。可以使用它来读取 DOM 布局并同步触发重渲染。在浏览器执行绘制之前，useLayoutEffect 内部的更新计划将被同步刷新。</p><ol start="6"><li>useDebugValue：用于在 React 开发者工具中显示自定义 hook 的标签。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">useFriendStatus</span><span class="token punctuation">(</span><span class="token parameter">friendID</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isOnline<span class="token punctuation">,</span> setIsOnline<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// 在开发者工具中的这个 Hook 旁边显示标签</span>
  <span class="token comment">// e.g. &quot;FriendStatus: Online&quot;</span>
  <span class="token function">useDebugValue</span><span class="token punctuation">(</span>isOnline <span class="token operator">?</span> <span class="token string">&#39;Online&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;Offline&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> isOnline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="react原理" tabindex="-1"><a class="header-anchor" href="#react原理" aria-hidden="true">#</a> React原理</h3><ul><li>虚拟 DOM</li><li>组件化和声明式编程</li><li>Reconciliation（协调）</li></ul><h3 id="react的diff算法是怎么完成的" tabindex="-1"><a class="header-anchor" href="#react的diff算法是怎么完成的" aria-hidden="true">#</a> React的diff算法是怎么完成的</h3><ol><li>把树形结构按照层级分解，只比较同级元素。</li><li>通过给列表结构的每个单元添加的唯一 key值进行区分同层次的子节点的比较。</li><li>React 只会匹配相同 class 的 component（这里面的 class 指的是组件的名字）</li><li>合并操作，调用 component 的 setState 方法的时候, React 将其标记为 dirty。到每一个事件循环结束, React 检查所有标记 dirty 的 component 重新绘制。</li><li>选择性渲染。开发人员可以重写 shouldComponentUpdate 提高 diff 的性能。</li></ol><h3 id="redux" tabindex="-1"><a class="header-anchor" href="#redux" aria-hidden="true">#</a> redux</h3><p>redux 的数据流：用户页面行为触发一个action（用到dispatch），然后store自动调用reducer，并传入两个参数，当前state和收到的action，reducer会返回一个新的state，每当state更新之后，view会根据state 触发重新渲染。 react-redux的实现原理：主要两个核心是</p><ul><li>Provider: 从最外面封装整个应用，并向connect模块传递store。</li><li>Connect: <ol><li>包装原组件，将state和action通过props的方式传入原组件内部。</li><li>监听store tree变化，使其包装的原组件可以响应state变化</li></ol></li></ul><p>redux异步中间件：redux-trunk， redux-saga 利用 applyMiddleware 将中间件添加到store上。</p></div></div><footer class="page-meta"><div class="meta-item edit-link"><a class="xicon-container left meta-item-label" href="https://github.com/dez0514/edit/main/blogs/React/README.md" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></a></div><div class="meta-item last-updated"><a class="xicon-container left meta-item-label" href="javascript:void(0)" target="_self"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->最后更新时间 2023-08-18 09:46:58<!--]--></span></a></div></footer><!----><div class="reco-valine-wrapper" style="display:block;"><div id="valine"></div></div></main><!--]--><div class="page-catalog-container"><h5 class="tip">此页内容</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/vuepress-reco/blogs/React/#react" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="React"><!--[--><!--]--><!--v-if--><span>React</span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#jsx" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="jsx"><!--[--><!--]--><!--v-if--><span>jsx</span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#class组件生命周期" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="class组件生命周期"><!--[--><!--]--><!--v-if--><span>class组件生命周期</span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#事件机制" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="事件机制："><!--[--><!--]--><!--v-if--><span>事件机制：</span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#hooks" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="Hooks"><!--[--><!--]--><!--v-if--><span>Hooks</span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#react原理" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="React原理"><!--[--><!--]--><!--v-if--><span>React原理</span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#react的diff算法是怎么完成的" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="React的diff算法是怎么完成的"><!--[--><!--]--><!--v-if--><span>React的diff算法是怎么完成的</span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/vuepress-reco/blogs/React/#redux" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="redux"><!--[--><!--]--><!--v-if--><span>redux</span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/vuepress-reco/assets/app-10c31ebe.js" defer></script>
  </body>
</html>
